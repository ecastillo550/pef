<!DOCTYPE html>
<html ng-app="haganeApp">
<head>
	<meta charset="UTF-8">
	<base href="<?= $this->config['document_root']; ?>">
	<script type="text/javascript">
	if ('<?=$this->auth->isAuth()?>' != '') {
		userId = <?=$this->auth->isAuth()?>;
	};
	</script>
	<link type="text/css" rel="stylesheet" href="css/style.css"	media="screen,projection" />

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

	<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/angular_material/1.0.0-rc1/angular-material.min.css">
	<link rel="stylesheet" href="css/angularjs-color-picker.min.css">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>

	<title>Biin Solutions</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

	<script type="text/javascript" src="js/tinycolor.min.js"></script>
	<script type="text/javascript" src="js/lib/angular.min.js"></script>
	<script type="text/javascript" src="js/lib/angular-animate.min.js"></script>
	<script type="text/javascript" src="js/lib/angular-aria.min.js"></script>
	<script type="text/javascript" src="js/lib/angular-material-rc-4.js"></script>
	<script type="text/javascript" src="js/lib/angularjs-color-picker.min.js"></script>
	<script type="text/javascript" src="js/lib/ng-file-upload-all.min.js"></script>
	<script type="text/javascript" src="js/lib/ng-img-crop.js"></script>
	<?=$this->loadJS('Angular/app/haganeApp.js')?>
	<?=$this->loadJS('Angular/app/Config.js')?>
	<?=$this->loadJS('Angular/app/MainController.js')?>
	<?=$this->loadJS('Angular/app/AdminController.js')?>
	<?=$this->loadJS('Angular/app/ClienteController.js')?>
	<?=$this->loadJS('Angular/app/registroController.js')?>
</head>
<body ng-controller="MainController">
<style>
<?php
include_once($this->config['appPath'].'Model/UserManagement.php');
$id = $this->auth->isAuth();
if (isset($id) && $id != '') {
	$this->userManager = new \Hagane\Model\UserManagement($this->auth, $this->db);
	$clientArray = $this->userManager->getClientUser($id);
}
?>
md-list-item.active a {
	background-color: <?=$clientArray[0]['secondary_color']?>;
	color: #fff;
}
.md-button {
	margin: 0;
}
.loader {
	position: absolute;
	top: 50%;
	left: 50%;
	z-index: 1000;
}
.slider {
	width: 100%;
}
.color-picker-swatch {
	position: absolute;
	height: 50px;
	width: 50px;
	border: solid 1px #000;
	box-sizing: border-box;
}
.color-picker-input {
	height: 50px;
	box-sizing: border-box;
}
.cropArea {
    background: #E4E4E4;
    overflow: hidden;
    width: 100%;
    height:350px;
}
img-crop {
  width: 100%;
  height: 100%;
  display: block;
  position: relative;
  overflow: hidden;
}
img-crop canvas {
  display: block;
  position: absolute;
  top: 50%;
  left: 50%;
  outline: none;
  -webkit-tap-highlight-color: rgba(255, 255, 255, 0);
  /* mobile webkit */
}
.tajetaConfig {
	width: 100%;
	max-width: 850px;
}
md-input-container {
	width: 100%;
}
md-dialog md-dialog-content {
    flex-direction: column;
    order: 0;
    overflow: auto;
}
md-dialog-actions button {
	float: right;
}
</style>
<section layout="row" flex>
	<md-sidenav class="md-sidenav-left md-whiteframe-z2" md-component-id="left" md-is-locked-open="$mdMedia('gt-md')">
		<md-toolbar class="md-primary">
			<h1 class="md-toolbar-tools">Biin Solutions</h1>
		</md-toolbar>
		<md-content layout-padding ng-controller="LeftCtrl">
		<md-list>
				<?php if($this->auth->isAuth()) :
				$obj= $this->user->getUserObject();
				if ($this->user->getUserType() == 'Administrador'): ?>
					<img class="img-sidebar" src="<?=$this->getSecureImage($this->user->getImgPath()); ?>">
					<p style="text-align: center;"> Administrador </p>
					<p style="text-align: center;"><b> <?=$this->user->getNombreCompleto()?> </b></p>
						<md-list-item ng-class="{active : isActive('/Admin/index')}" ng-href="Admin/index">Inicio</md-list-item>
						<md-list-item ng-class="{active : isActive('/Admin/users')}" ng-href="Admin/users">Gesti&oacute;n de usuarios</md-list-item>
						<md-list-item ng-class="{active : isActive('/Admin/clientes')}" ng-href="Admin/clientes">Clientes</md-list-item>
						<md-list-item ng-class="{active : isActive('#')}" ng-href="#">Reporte de Clientes</md-list-item>
						<md-list-item ng-class="{active : isActive('/User/logout')}" ng-href="User/logout">Cerrar Sesion</md-list-item>
				<?php elseif ($this->user->getUserType() == 'Cliente'): ?>
					<img class="img-sidebar" src="<?=$this->getSecureImage($this->user->getUserObject()->getLogo()); ?>">
						<p style="text-align: center;"><b><?=$this->user->getUserObject()->getEmpresa()?></b></p>
						<p style="text-align: center;"><b> <?=$this->user->getNombreCompleto()?> </b></p>
						<md-list-item ng-class="{active : isActive('/Cliente/index')}" ng-href="Cliente/index">Inicio</md-list-item>
						<md-list-item ng-class="{active : isActive('/Cliente/dashboard')}" ng-href="Cliente/dashboard">Dashboard</md-list-item>
						<md-list-item ng-class="{active : isActive('/Cliente/subir')}" ng-href="Cliente/subir">Subir archivo</md-list-item>
						<md-list-item ng-class="{active : isActive('/Cliente/config')}" ng-href="Cliente/config">Configuraci√≥n</md-list-item>
						<md-list-item ng-class="{active : isActive('/User/logout')}" ng-href="User/logout">Cerrar Sesion</md-list-item>
				<?php endif; ?>
				<?php else : ?>
						<img class="img-sidebar" src="img/logobiin.png">
						<br>
						<br>
						<md-list-item ng-class="{active : isActive('/User')}" ng-href="User" class="md-primary">Login</md-list-item>
				<?php endif; ?>
			</md-list>
		</md-content>
	</md-sidenav>

<section layout="column" flex>
	<md-toolbar>
		<div class="md-toolbar-tools">
			<md-button ng-click="toggleLeft()" hide-gt-md class="md-icon-button">
				<md-icon md-font-set="material-icons">menu</md-icon>
			</md-button>
			<h2>{{toolbar_title}}</h2>
			<span flex></span>
			<md-button class="md-icon-button" aria-label="Contextual" ng-click="toggleRight()" ng-hide="isOpenRight()">
				<md-icon md-font-set="material-icons">more_vert</md-icon>
			</md-button>
		</div>
	</md-toolbar>


	<md-content flex style="padding: 15px;">
		<div class="loader"  ng-show="loading">
			<md-progress-circular md-mode="{{loading}}"></md-progress-circular>
		</div>
		<?php echo $this->view; ?>
	</md-content>


</section>
	<md-sidenav class="md-sidenav-right md-whiteframe-z2" md-component-id="right">
		<md-toolbar class="md-accent">
			<h1 class="md-toolbar-tools">Pide ayuda a Biin</h1>
		</md-toolbar>
		<md-content ng-controller="RightCtrl" layout-padding>
			<p>Nos pondremos en contacto contigo.</p>
			<form>
				<md-input-container>
					<label for="testInput">Mensaje</label>
					<input type="text" id="testInput" ng-model="data" md-autofocus>
				</md-input-container>
			</form>
			<md-button ng-click="close()" class="md-primary">
				Cerrar
			</md-button>
		</md-content>
	</md-sidenav>
</section>
</body>
</html>
